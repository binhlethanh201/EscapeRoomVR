<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <title>Đổi mật khẩu</title>
  <link rel="stylesheet" href="/css/user/changepassword.css">
</head>

<body>
  <h1>Đổi mật khẩu</h1>

  {{#if error}}<p class="error">{{error}}</p>{{/if}}

  <form method="POST" action="/profile/{{user._id}}/changepassword" onsubmit="return confirmChangePassword()">
    <label for="oldPassword">Mật khẩu cũ:</label>
    <input type="password" id="oldPassword" name="oldPassword" required>

    <label for="newPassword">Mật khẩu mới:</label>
    <input type="password" id="newPassword" name="newPassword" required>

    <label for="confirmNewPassword">Nhập lại mật khẩu mới:</label>
    <input type="password" id="confirmNewPassword" name="confirmNewPassword" required>

    <div class="form-actions">
      <button type="submit">Xác nhận</button>
      <a href="/profile/{{user._id}}" class="cancel-button">Huỷ</a>
    </div>
  </form>

  <script>
    function confirmChangePassword() {
      const newPassword = document.getElementById('newPassword').value;
      const confirmPassword = document.getElementById('confirmNewPassword').value;
      if (newPassword !== confirmPassword) {
        alert("Mật khẩu mới và mật khẩu xác nhận không khớp.");
        return false;
      }
      return confirm("Bạn có chắc chắn muốn đổi mật khẩu?");
    }
  </script>
</body>

</html>